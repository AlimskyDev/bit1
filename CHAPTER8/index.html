<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body {
    font-family: Verdana, Geneva, Tahoma, sans-serif;
  }
  form {
    padding: 0 15px;
    width: 350px;
    
    
  }
  .title {
    margin-bottom: 3px;
    margin-top: 10px;
  }
  .error {
    margin: 5px 0;
    color: red;
    font-size: 10px;
  }
  .btn {
    margin-top: 10px;
    
    padding: 10px;
    width: 100px;
  }

</style>

<body>
  <form id="form"  action="">
    <div class="title">Email</div>
    <input type="Email" id="emailInput">
    <div id="emailError" class="error">
      </div>

    <div class="title">Password</div>
    <input type="password" id="pass">
    <div id="passError" class="error">
      </div>

    <div class="title">Retype password</div>
    <input type="password" id="rePass">
    <div id="rePassError" class="error">
      </div>
    <div></div>
    
    <input class="btn" id="btn" type="button" value="REGISTER">
  </form>
<script>
  let users = [
    {email: 'user1@example.com', password: 'password1'},
    {email: 'user2@example.com', password: 'password2'},
    {email: 'user3@example.com', password: 'password3'},
    {email: 'user4@example.com', password: 'password4'},
    {email: 'user5@example.com', password: 'password5'}
  ];
  let user = {};
  function callOnBlur(){
    if (emailInput.value != 'enter email') {
      let k1 = true;
      let k2 = true;
      for (let u of users){
        if (u.email === emailInput.value) {
          k1 = false;
        }
      }
      if (!emailInput.value.includes('@'&&'.')) {
        k2 = false;
      } else {
        emailError.innerText = '';
      }
      if (!k1) {
        emailError.innerText = `${emailInput.value} is already use, enter other email`;
        emailInput.value = '';
      }
      if (!k2) {
        emailError.innerText = 'Wrong format';
      }
    }
  }

  function callOnFocus(){
    if (!k1) {
      emailInput.value = '';
    }
  }

  function passBlur(){
      if (emailInput.value=='' || emailError.innerText != '') {
        emailError.innerText = 'Enter right email';
        pass.value = '';
        emailInput.focus();
      }
      if (emailInput.value!='' && emailError.innerText == '' && pass.value.length<6) {
        passError.innerText = 'Password length at least must be 6 symbols';
        pass.value = '';
      } else {
        passError.innerText = '';
      }
  }
  
  function submit(){
    if (pass.value === rePass.value) {
      rePassError.innerText = '';
    } else {
      rePassError.innerText = 'Password are not same';
    }
    user.email = emailInput.value;
    user.password = pass.value;
    users.push(user);
    console.log('Success');
  }
  
  emailInput.onblur = callOnBlur;
  emailInput.onfocus = callOnFocus;
  pass.onblur = passBlur;
  rePass.onblur = submit;
  btn.addEventListener('click', submit());

</script>
</body>
</html>